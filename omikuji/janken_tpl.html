<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="js/jquery-2.1.3.min.js"></script>
    <link rel="stylesheet" href="css/sample.css">
    <title>じゃんけん</title>
</head>

<body>

    <header>
        <h1 class="title">じゃんけん</h1>
    </header>

    <main>
        <div>
            <p class="subtitle">いざ勝負！</p>
        </div>
        <ul class="mainarea">
            <li id="gu_btn" class="btn_box"><img src="img/Goo.png" alt="グー" width="100%"></li>
            <li id="cho_btn" class="btn_box"><img src="img/choki.png" alt="チョキ" width="100%"></li>
            <li id="par_btn" class="btn_box"><img src="img/Par.png" alt="パー" width="100%"></li>
        </ul>
        <div class="PCHands">
            <p class="subtitle">コンピュータの出した手は？</p>
            <p><span id="pc_hands">なに？</span></p>
        </div>
        <div class="judgement">
            <p class="subtitle">判定は・・・</p>
            <p><span id="judgement">？？</span></p>
        </div>

        <div class="counter">
            <p class="subtitle">勝敗カウンター</p>
            <ul>
                <li>勝ち</li>
                <li>あいこ</li>
                <li>負け</li>
            </ul>
            <ul>
                <li id="wincounter"></li>
                <li id="drawcounter"></li>
                <li id="losecounter"></li>
            </ul>
        </div>

        <div  class="reset">
            <button id="reset_btn" class="button">リセット</button>
        </div>
    </main>

    <footer></footer>
    <script>
     
        //1.CPUの手をRandomでセット
        let r = Math.ceil(Math.random()*3);
        let view;
        const gu_img = '<img src="img/Goo.png" width="300px">';
        const cho_img = '<img src="img/choki.png" width="300px">';
        const par_img = '<img src="img/par.png" width="300px">';
        
        function setPcHand(){
            let r = Math.ceil(Math.random()*3);
            if(r == 1){
                view = gu_img;
            }
            if(r == 2){
                view = cho_img;
            }
            if(r == 3){
                view = par_img;
            }
            return view;
        }
        
        //2.あなたの手をセットして勝敗判定
        let you;
        let judge;
        let wincount = 0;
        let drawcount = 0;
        let losecount = 0;

        //カウンターを表示
        function showcounter(){
            $("#wincounter").html(wincount);
            $("#drawcounter").html(drawcount);
            $("#losecounter").html(losecount);
        }

        //カウンターをリセット
        function resetcounter(){
            wincount = 0;
            drawcount = 0;
            losecount = 0;
        }
        
        showcounter();

        //グーボタンが押された
        $("#gu_btn").on("click",function () {
            you = 'グー';
            view = setPcHand();
            if(view==gu_img){
                judge='あいこ';
                drawcount +=1;
            }
            if(view==cho_img){
                judge='勝ち';
                wincount += 1;
            }
            if(view==par_img){
                judge='負け';
                losecount += 1;
            }
            $("li").css("border","1px solid #666");
            $("#gu_btn").css("border","1px solid #FF0000");
            $('#pc_hands').html(view);
            $('#judgement').html(judge);
            showcounter();
        }
        )
        //チョキボタンが押された
        $("#cho_btn").on("click",function () {
            you = 'チョキ';
            view = setPcHand();
            if(view==gu_img){
                judge='負け';
                losecount += 1;
            }
            if(view==cho_img){
                judge='あいこ';
                drawcount +=1;
            }
            if(view==par_img){
                judge='勝ち';
                wincount += 1;
            }
            $("li").css("border","1px solid #666");
            $("#cho_btn").css("border","1px solid #FF0000");
            $('#pc_hands').html(view);
            $('#judgement').html(judge);
            showcounter();
        }
        )
        //パーボタンが押された
        $("#par_btn").on("click",function () {
            you = 'パー';
            view = setPcHand();
            if(view==gu_img){
                judge='勝ち';
                wincount += 1;
            }
            if(view==cho_img){
                judge='負け';
                losecount += 1;
            }
            if(view==par_img){
                judge='あいこ';
                drawcount +=1;
            }
            $("li").css("border","1px solid #666");
            $("#par_btn").css("border","1px solid #FF0000");
            $('#pc_hands').html(view);
            $('#judgement').html(judge);
            showcounter();
        }
        )
        
        $("#reset_btn").on("click",function(){
            // location.reload();
            resetcounter();
            showcounter();
        })


   
    </script>
</body>

</html>